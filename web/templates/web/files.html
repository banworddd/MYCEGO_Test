{% extends "layout.html" %}

{% block title %}–§–∞–π–ª—ã –Ω–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–µ{% endblock %}

{% block content %}
    <div class="files-page">
        <div class="form-container">
            <form method="GET" action="">
                <input type="text" name="folder_link" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –ø–∞–ø–∫—É –Ø–Ω–¥–µ–∫—Å.–î–∏—Å–∫–∞" required>
                <input type="submit" value="–ü–æ–∫–∞–∑–∞—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ">
            </form>
        </div>

        {% if files_data %}
            <h1>–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø–∞–ø–∫–∏: {{ files_data.name }}</h1>
            <p>–í–ª–∞–¥–µ–ª–µ—Ü: {{ files_data.owner }}</p>

            {% if error_message %}
                <p style="color: red;">–û—à–∏–±–∫–∞: {{ error_message }}</p>
            {% endif %}

            <ul>
                {% for item in files_data.items %}
                    <li>
                        {% if item.type == 'dir' %}
                            <div class="folder-container">
                                <div class="folder-header">
                                    <span class="folder-icon">üìÅ</span>
                                    <span>{{ item.name }}</span>
                                </div>
                            </div>
                            <div class="folder-content">
                                {% if item.items %}
                                    {% include "web/folder_content.html" with files_data=item %}
                                {% endif %}
                            </div>
                        {% else %}
                            <div class="file-container">
                                <div class="file">
                                    <input type="checkbox" class="file-checkbox" data-url="{{ item.file }}">
                                    üìÑ <a href="{{ item.preview }}" target="_blank">{{ item.name }}</a> (—Ñ–∞–π–ª, {{ item.size }})
                                </div>
                            </div>
                        {% endif %}
                    </li>
                {% endfor %}
            </ul>

            <button class="download-button" onclick="downloadSelectedFiles()">–°–∫–∞—á–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã</button>
        {% endif %}
    </div>
{% endblock %}